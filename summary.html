<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resumen</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header>
        <h1>Resumen</h1>
    </header>
    <main>
        <div class="summary-container">
            <h2>Tus Componentes Seleccionados</h2>
            <ul class="summary-list">
                <li><strong>CPU:</strong> <span id="cpu"></span></li>
                <li><strong>GPU:</strong> <span id="gpu"></span></li>
                <li><strong>RAM:</strong> <span id="ram"></span></li>
                <li><strong>Almacenamiento:</strong> <span id="storage"></span></li>
                <li><strong>Caja:</strong> <span id="case"></span></li>
            </ul>
            <p class="total-price"><strong>Precio Total:</strong> €<span id="totalPrice"></span></p>
            <button class="buy-button">Comprar Ahora</button>
        </div>
    </main>
    <div class="optional-components">
        <h3>Componentes Opcionales</h3>
        <form id="optionalForm">
            <label>
                <input type="checkbox" name="optional" value="keyboard" data-price="30">
                Teclado (€30)
            </label><br>
            <label>
                <input type="checkbox" name="optional" value="mouse" data-price="20">
                Ratón (€20)
            </label><br>
            <label>
                <input type="checkbox" name="optional" value="monitor" data-price="150">
                Pantalla (€150)
            </label><br>
            <button type="button" id="updatePriceButton">Actualizar Precio</button>
        </form>
    </div>
    <script type="module">
        import { prices } from './js/prices.js';

        const params = new URLSearchParams(window.location.search);

        ['cpu', 'gpu', 'ram', 'storage', 'case'].forEach(component => {
            const value = params.get(component);
            document.getElementById(component).textContent = value;
        });

        const basePrice = ['cpu', 'gpu', 'ram', 'storage', 'case']
            .map(component => prices[params.get(component)] || 0)
            .reduce((sum, price) => sum + price, 0);

        const totalPriceElement = document.getElementById('totalPrice');
        totalPriceElement.textContent = basePrice;

        document.getElementById('updatePriceButton').addEventListener('click', () => {
            const optionalPrices = Array.from(document.querySelectorAll('input[name="optional"]:checked'))
                .map(input => parseFloat(input.dataset.price))
                .reduce((sum, price) => sum + price, 0);

            totalPriceElement.textContent = basePrice + optionalPrices;
        });
    </script>
</body>
</html>